<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>冷氣維修／保養預約</title>
  <!-- 引用拆出去的 CSS -->
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>

<!-- ===== 頁首 (Header + Navbar) ===== -->
<header>
  <div class="navbar">
    <!-- 左側 Logo / 網站名稱 -->
    <div class="logo">淨‧空調</div>

    <!-- 手機版選單切換按鈕 (visible on max-width:480px) -->
    <div class="menu-toggle" onclick="toggleMenu()">☰</div>

    <!-- 右側導覽選單 -->
    <nav id="mainNav">
      <ul>
        <li><a href="#">首頁</a></li>

        <!-- 帶下拉式選單的選項：服務項目 -->
        <li>
          <a href="#">服務項目 ▼</a>
          <ul class="dropdown">
            <li><a href="#service-clean">冷氣清洗</a></li>
            <li><a href="#service-repair">冷氣維修</a></li>
            <li><a href="#service-maintain">冷氣保養</a></li>
          </ul>
        </li>

        <li><a href="#contact">聯絡我們</a></li>
      </ul>
    </nav>
  </div>
</header>

<!-- ===== Banner 圖片 ===== -->
<div class="banner">
  <!-- 將您原本的冷氣清潔宣傳圖另存為 banner.jpg，放在同一資料夾 -->
  <img src="banner.jpg" alt="清理冷氣的三個好處 Banner" />
</div>

<!-- ===== 預約表單 ===== -->
<div class="form-container" id="contact">
  <h2>冷氣維修／保養預約</h2>
  <form id="appointmentForm">
    <div class="form-group">
      <label for="customerName">姓名</label>
      <input type="text" id="customerName" name="customerName" placeholder="請輸入您的姓名" required />
    </div>
    <div class="form-group">
      <label for="customerPhone">電話</label>
      <input type="tel" id="customerPhone" name="customerPhone" placeholder="請輸入聯絡電話" required />
    </div>
    <div class="form-group">
      <label for="customerEmail">Email</label>
      <input type="email" id="customerEmail" name="customerEmail" placeholder="請輸入電子郵件" required />
    </div>
    <div class="form-group">
      <label for="customerAddress">地址</label>
      <textarea id="customerAddress" name="customerAddress" placeholder="請輸入完整地址（例如：桃園市XX路XX號）" required></textarea>
    </div>
    <div class="form-group">
      <label for="serviceDatetime">預約時間</label>
      <input type="datetime-local" id="serviceDatetime" name="serviceDatetime" required />
    </div>
    <div class="form-group">
      <label for="serviceType">服務種類</label>
      <select id="serviceType" name="serviceType" required>
        <option value="">-- 請選擇 --</option>
        <option value="冷氣清洗" id="service-clean">冷氣清洗</option>
        <option value="冷氣維修" id="service-repair">冷氣維修</option>
        <option value="冷氣保養" id="service-maintain">冷氣保養</option>
      </select>
    </div>
    <div class="form-group">
      <label for="customerNote">備註（選填）</label>
      <textarea id="customerNote" name="customerNote" placeholder="例如：故障狀況描述、其他需求..."></textarea>
    </div>

    <button type="submit" class="btn-submit">送出預約</button>
    <p class="note">＊提交後由網站自動寄信，不會跳出本機郵件程式。</p>
  </form>
</div>

<!-- ===== EmailJS SDK 與 前端寄信程式碼 ===== -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
  // 切換手機版選單顯示／隱藏
  function toggleMenu() {
    const nav = document.getElementById("mainNav");
    nav.classList.toggle("open");
  }

  // 初始化 EmailJS：把 YOUR_USER_ID 換成 EmailJS 後台提供的 user_xxx
  emailjs.init("f840322danny@gmail.com");

  // 處理表單提交
  document.getElementById("appointmentForm").addEventListener("submit", function(e) {
    e.preventDefault();

    // 讀取表單內容
    const name      = document.getElementById("customerName").value.trim();
    const phone     = document.getElementById("customerPhone").value.trim();
    const email     = document.getElementById("customerEmail").value.trim();
    const address   = document.getElementById("customerAddress").value.trim();
    const datetime  = document.getElementById("serviceDatetime").value;
    const type      = document.getElementById("serviceType").value;
    const note      = document.getElementById("customerNote").value.trim();

    // 組成 EmailJS 模板參數
    const templateParams = {
      customer_name: name,
      customer_phone: phone,
      customer_email: email,
      customer_address: address,
      service_datetime: datetime,
      service_type: type,
      customer_note: note
    };

    // 寄信：把 YOUR_SERVICE_ID、YOUR_TEMPLATE_ID 換成你在 EmailJS 後台看到的值
    emailjs.send("YOUR_SERVICE_ID", "YOUR_TEMPLATE_ID", templateParams)
            .then(function(response) {
              alert("✅ 預約已成功送出，店家將儘快與您聯繫！");
              document.getElementById("appointmentForm").reset();
            }, function(error) {
              console.error("EmailJS 發信失敗：", error);
              alert("❌ 發生錯誤，無法送出預約，請稍後再試。");
            });
  });
</script>
</body>
</html>
